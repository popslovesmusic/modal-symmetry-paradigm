{
  // Modules are bundles of connectors for agents or subsystems
  $schema: "https://json-schema.org/draft-07/schema#",
  title: "MBC Connector Module Pack",
  type: "object",

  properties: {
    schema_version: { type: "string" },
    family_id: { type: "string" },
    family_name: { type: "string" },

    modules: {
      type: "array",
      items: {
        type: "object",
        properties: {
          module_id: { type: "string" },
          name: { type: "string" },
          description: { type: "string" },
          connectors: {
            type: "array",
            items: { type: "string" }, // connector IDs from connector pack
          },
          default_routing_policy: { type: "string" },
          exposed_interfaces: {
            type: "array",
            items: {
              type: "object",
              properties: {
                interface_id: { type: "string" },
                direction: {
                  type: "string",
                  enum: ["in", "out", "inout"],
                },
                payload_type: { type: "string" },
                notes: { type: "string" },
              },
              required: ["interface_id", "direction"],
            },
          },
        },
        required: [
          "module_id",
          "name",
          "connectors",
        ],
      },
    },
  },

  required: ["schema_version", "family_id", "modules"],
}
